<h1>Food Storage Inventory</h1>
<a href="/">â† Back to Weekly Plan</a>

<form method="POST" action="/storage">
  <input name="name" placeholder="Food name" required />
  <input name="quantity" placeholder="How many units?" type="number" required />
  <input name="unit" placeholder="e.g. bag, box" />
  <input name="servingsPerUnit" placeholder="Servings per unit" type="number" required />
  <input name="expires" type="date" />
  <input name="category" placeholder="Pantry, freezer, etc." />
  <button type="submit">Add</button>
</form>

<h2>Current Inventory</h2>
<ul>
  <% storage.forEach(item => { %>
    <li>
      <strong><%= item.name %></strong>:
      <%= item.quantity %> <%= item.unit %> 
      (Expires: <%= new Date(item.expires).toDateString() %>)<br>

      <% if (item.stats) { %>
        ğŸ½ Total Calories: <%= item.stats.totalCalories.toLocaleString() %> kcal  
        | Protein: <%= item.stats.totalProtein %>g  
        | Covers: <%= item.stats.daysOfSupport %> day(s) for 5 people
      <% } else { %>
        <em>Nutrition data incomplete.</em>
      <% } %>

      <!-- Edit and Delete Buttons -->
      <form method="POST" action="/storage/delete/<%= item._id %>" style="display:inline;">
        <button onclick="return confirm('Delete this item?')">ğŸ—‘ï¸</button>
      </form>
      <a href="/storage/edit/<%= item._id %>">âœï¸ Edit</a>
    </li>
  <% }) %>
</ul>